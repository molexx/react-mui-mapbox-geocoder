import e,{useRef as t,useEffect as n,useState as r,useCallback as o}from"react";import i from"react-autosuggest";import a from"autosuggest-highlight/match";import u from"autosuggest-highlight/parse";import{Fade as l,LinearProgress as c,useTheme as s,Paper as p,alpha as m,Box as f,IconButton as g,MenuItem as d,Typography as h,InputBase as v,InputAdornment as b,TextField as x}from"@mui/material";import E from"@mui/icons-material/Search";import y from"@mui/icons-material/Cancel";import{useDebouncedCallback as C}from"use-debounce";function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e){return null!=e}var S=function(t){var o=t.show,i=void 0!==o&&o,a=r(i),u=a[0],s=a[1],p=C(function(){return s(!0)},250);return n(function(){i?p():(p.flush(),s(!1))},[p,i]),/*#__PURE__*/e.createElement(l,{in:u},/*#__PURE__*/e.createElement(c,{style:{position:"absolute",width:"100%"}}))},w=["ref","inputClasses"],j=function(t){var n=k({},t);/*#__PURE__*/return e.createElement(v,k({type:"search",fullWidth:!0,startAdornment:/*#__PURE__*/e.createElement(b,{position:"start"},/*#__PURE__*/e.createElement(E,{color:"action"}))},n))},I=function(t){var n=k({},t);/*#__PURE__*/return e.createElement(x,k({type:"search",fullWidth:!0,InputProps:{startAdornment:/*#__PURE__*/e.createElement(b,{position:"start"},/*#__PURE__*/e.createElement(E,{color:"action"}))}},n))};export default function(c){var v=c.endpoint,b=void 0===v?"https://api.mapbox.com":v,x=c.inputPlaceholder,E=void 0===x?"Search":x,C=c.showLoader,O=void 0===C||C,_=c.source,R=void 0===_?"mapbox.places":_,T=c.onSuggest,q=void 0===T?function(){}:T,F=c.focusOnMount,B=void 0!==F&&F,D=c.showInputContainer,W=void 0===D||D,G=c.inputValue,V=void 0===G?"":G,z=c.proximity,A=c.country,H=c.bbox,L=c.types,U=c.limit,M=c.autocomplete,N=c.language,J=c.suggestionsPaperProps,K=c.onSelect,Q=c.accessToken,X=c.onInputFocus,Y=c.onInputBlur,Z=c.inputClasses,$=c.inputProps,ee=c.textFieldProps,te=c.inputPaperProps,ne=c.onInputClear,re=r([]),oe=re[0],ie=re[1],ae=r(!1),ue=ae[0],le=ae[1],ce=r(new Date),se=ce[0],pe=ce[1],me=r(V),fe=me[0],ge=me[1],de=r(!1),he=de[0],ve=de[1],be=t(null),xe=function(e){var r=t();return n(function(){r.current=e},[e]),r.current}(fe),Ee=o(function(){var e=(be.current||{}).input,t=void 0===e?null:e;t&&t.focus()},[]);n(function(){ge(V)},[V]),n(function(){B&&Ee()},[B,Ee]),n(function(){q&&q(oe)},[oe,q]),n(function(){""===fe&&fe!==xe&&ne&&ne()},[fe,xe,ne]);var ye=o(function(){ge(""),Ee()},[Ee]),Ce=s(),ke=o(function(t){var n=t.ref,r=t.inputClasses,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,w),i=k({},null!=te?te:{}),a=/*#__PURE__*/e.createElement(j,k({classes:r,inputRef:n},o,$));return ee&&(a=/*#__PURE__*/e.createElement(I,k({classes:r,inputRef:n},o,ee))),W?/*#__PURE__*/e.createElement(e.Fragment,null,/*#__PURE__*/e.createElement(S,{show:ue&&O}),/*#__PURE__*/e.createElement(p,k({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:he?Ce.palette.background.paper:m(Ce.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:Ce.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},i),/*#__PURE__*/e.createElement(f,{display:"flex",flexDirection:"row",alignItems:"center"},/*#__PURE__*/e.createElement(f,{flex:"auto",sx:{flexShrink:0,flexGrow:1}},a),/*#__PURE__*/e.createElement(l,{in:fe.length>0,unmountOnExit:!0,mountOnEnter:!0},/*#__PURE__*/e.createElement(f,{flex:"auto",sx:{flexGrow:0,flexShrink:1}},/*#__PURE__*/e.createElement(g,{"aria-label":"Clear Search Input",onClick:ye,size:"large"},/*#__PURE__*/e.createElement(y,null))))))):a},[$,ee,W,ue,O,he,te,fe.length,ye,Ce]),Pe=o(function(e){ve(!0),X&&X(e)},[X]),Se=o(function(e){ve(!1),Y&&Y(e)},[Y]),we=o(function(t){var n=t.children;/*#__PURE__*/return e.createElement(p,k({},t.containerProps,{square:!1,elevation:4},J),n)},[J]),je=o(function(e,t,n){!e&&t&&t.features&&se<=n&&(pe(n),ie(t.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),le(!1))},[se]),Ie=o(function(e){var t=e.value;le(!0),xe===t?le(!1):""===t?(ie([]),le(!1)):function(e,t,n,r,o,i,a,u,l,c,s,p){try{var m,f,g,d,h=new Date;Promise.resolve(function(v,b){try{var x=(m=e+"/geocoding/v5/"+t+"/"+r+".json",f=k({},P(n)&&{access_token:n},P(i)&&{proximity:i&&2===Object.keys(i).length?i.longitude+","+i.latitude:null},P(u)&&{bbox:u&&u.length>0?u.join(","):null},P(l)&&{types:l},P(a)&&{country:a},P(c)&&{limit:c},P(s)&&{autocomplete:s},P(p)&&{language:p}),g=m+"?"+(E=f,Object.keys(E).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(E[e])}).join("&")),Promise.resolve(fetch(g)).then(function(e){return d=e,Promise.resolve(d.json()).then(function(e){return o(null,e,h),{err:null,res:d,searchTime:h}})}))}catch(e){return b(e)}var E;return x&&x.then?x.then(void 0,b):x}(0,function(e){return o(e,null,h),{err:e,res:null,searchTime:h}}))}catch(e){return Promise.reject(e)}}(b,R,Q,t,je,z,A,H,L,U,M,N)},[H,A,b,U,N,M,R,z,xe,je,L,Q]),Oe=o(function(e,t){return K&&K(t.suggestion.feature),!1},[K]),_e=o(function(){ie([])},[]),Re=o(function(e,t){ge(t.newValue)},[]),Te=o(function(t,n){var r=n.isHighlighted,o=a(t.label,n.query),i=u(t.label,o);/*#__PURE__*/return e.createElement(d,{selected:r,component:"div"},/*#__PURE__*/e.createElement(h,{noWrap:!0,variant:"subtitle1"},i.map(function(t,n){/*#__PURE__*/return e.createElement(h,{key:n,component:"span",variant:"inherit",sx:{fontWeight:t.highlight?500:300}},t.text)})))},[]),qe=o(function(e){return e.label},[]);return Q?/*#__PURE__*/e.createElement(f,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},/*#__PURE__*/e.createElement(i,{ref:be,renderInputComponent:ke,suggestions:oe,onSuggestionsFetchRequested:Ie,onSuggestionsClearRequested:_e,onSuggestionSelected:Oe,renderSuggestionsContainer:we,getSuggestionValue:qe,renderSuggestion:Te,inputProps:{placeholder:E,value:fe,onChange:Re,onFocus:Pe,onBlur:Se,className:Z}})):null}
//# sourceMappingURL=index.esm.js.map
